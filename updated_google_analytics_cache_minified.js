//Minified working as of Aug 28, 2019
function removeStorage(e){try{localStorage.removeItem(e),localStorage.removeItem(e+"_expiresIn")}catch(t){return console.log("removeStorage: Error removing key ["+e+"] from localStorage: "+JSON.stringify(t)),!1}return!0}function getStorage(e){var t=Date.now(),o=localStorage.getItem(e+"_expiresIn");if(null==o&&(o=0),o<t)return removeStorage(e),null;try{return localStorage.getItem(e)}catch(t){return console.log("getStorage: Error reading key ["+e+"] from localStorage: "+JSON.stringify(t)),null}}function setStorage(e,t,o){o=null==o?86400:Math.abs(o);var s=Date.now()+1e3*o;try{localStorage.setItem(e,t),localStorage.setItem(e+"_expiresIn",s)}catch(t){return console.log("setStorage: Error setting key ["+e+"] in localStorage: "+JSON.stringify(t)),!1}return!0}async function coursesRequest(e){let t=await fetch("/api/v1/users/self/courses?per_page=100",{headers:{Accept:"application/json"}}),o=await t.json();var s=JSON.stringify(o);return setStorage("ga_enrollments",s,null),parseCourses(e,s)}function parseCourses(e,t){if(null!=t){let s=JSON.parse(t);for(var o=0;o<s.length;o++)if(s[o].id==e)return s[o]}return null}function gaCourseDimensions(e){ga("custom_ga.set","dimension1",e.id),ga("custom_ga.set","dimension2",e.name),ga("custom_ga.set","dimension4",e.account_id),ga("custom_ga.set","dimension7",e.enrollment_term_id),ga("custom_ga.set","dimension8",e.enrollments[0].type),ga("custom_ga.send","pageview")}function googleAnalyticsCode(e){var t,o,s,a;if(ga("create",e,"auto","custom_ga"),t=ENV.current_user_id,o=ENV.current_user_roles,ga("custom_ga.set","userId",t),ga("custom_ga.set","dimension5",t),ga("custom_ga.set","dimension3",o),a=window.location.pathname.match(/\/courses\/(\d+)/)){a=a[1],s=0;try{let e=getStorage("ga_enrollments");if(null!=e){var r=parseCourses(a,e);null===r?coursesRequest(a).then(e=>{null===e?(ga("custom_ga.set","dimension4",a),ga("custom_ga.send","pageview")):gaCourseDimensions(e)}):gaCourseDimensions(r)}else coursesRequest(a).then(e=>{null===e?(ga("custom_ga.set","dimension4",a),ga("custom_ga.send","pageview")):gaCourseDimensions(e)})}catch(e){if((s+=1)>5)return ga("custom_ga.set","dimension4",a),void ga("custom_ga.send","pageview")}}else ga("custom_ga.send","pageview")}
googleAnalyticsCode("UA-12345678-1");
